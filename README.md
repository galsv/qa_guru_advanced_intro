# qa_guru_advanced_intro

## Описание
Этот проект представляет собой серверное приложение на FastAPI с набором конечных точек для управления пользователями, а также включает в себя тесты для проверки работы API и схем.

### Задание из урока
Разработать микросервис на Python + FastAPI, можно использовать ChatGPT / autotests.ai (для аппрува доступа отписать в чат потока).



1. Разработать несколько API-автотестов на https://reqres.in (если обучались на основном курсе python - можно взять код автотестов из домашнего задания)\
Можно также за основу взять https://github.com/qa-guru/qa_guru_python_9_19
2. Вместо https://reqres.in разработать свой микросервис в стеке Python + FastAPI (допускается также Flask, Django).
Пример - https://github.com/qa-guru/python-advanced-intro

- Автотесты должны также успешно проходить.

- В коде микросервиса не должно быть хардкода\
Например, не должно быть эндпоинтов типа /api/users/2 -  правильнее /api/users/{user_id}

3. Данные для ответа пока что можно хранить в текстовом файле, в следующих занятиях мы перенесем их в базу данных

4. Желательно оформить README.md - https://school.qa.guru/teach/control/stream/view/id/465999013 в тренинге есть несколько занятий по оформлению красивой документации.

### Структура проекта
Проект имеет следующую структуру:
- test_server/test_reqes.py – тесты для проверки работы API.
- fastapi_server/server.py – основной файл с реализацией сервера FastAPI.
- main.py – файл для запуска сервера.

## Установка
1.	Клонируйте репозиторий:
```sh
git clone <URL_репозитория>
cd <папка_репозитория>
```
2. Установите Poetry:\
 Следуйте инструкциям на [официальном сайте Poetry](https://python-poetry.org/docs/#installing-with-pipx) для установки Poetry.
3. Установите зависимости:
```sh
poetry install
```

## Запуск сервера
```sh
python main.py
```
или
```sh
python3 main.py
```
## API
### Конечные точки
- GET /api/users\
  Получает список пользователей с поддержкой пагинации.
- POST /api/users\
  Создает нового пользователя. Принимает JSON с полями name и job.
- POST /api/user\
  Создает нового пользователя. Принимает данные формы с полями name и job.

### Примеры запросов
Получение пользователей
```sh
curl -X 'GET' 'http://127.0.0.1:8002/api/users?page=1&per_page=10'
```

Создание пользователя (JSON)
```sh
curl -X 'POST' 'http://127.0.0.1:8002/api/users' -H 'Content-Type: application/json' -d '{"name": "John Doe", "job": "Developer"}'
```

```sh
curl -X 'POST' 'http://127.0.0.1:8002/api/user' -F 'name=John Doe' -F 'job=Developer'
```

## Тестирование

Для запуска тестов выполните команду:
```sh
pytest -sv test_server/test_reqes.py
```

### Примечания
- Убедитесь, что сервер запущен перед запуском тестов.
- В файле test_reqes.py используются как тесты схем, так и тесты логики работы API.